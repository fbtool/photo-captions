<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo captions Generator | Facebook Fuckers</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background: #1e1e1e;
            border-radius: 12px;
            padding: 20px;
            width: 120%;
            max-width: 800px;
            box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.6);
            text-align: center;
        }

        h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #ff8f00;
        }

        .info {
            font-size: 14px;
            margin-bottom: 15px;
            color: #bbb;
        }

        #caption-box {
            width: 100%;
            height: 150px; /* Increased height */
            font-size: 18px; /* Set font size */
            padding: 50px;
            border: none;
            border-radius: 10px;
            background-color: #262626;
            color: #fff;
            resize: none;
            overflow-y: auto;
            margin-bottom: 20px;
            text-align: center;
        }

        button {
            padding: 10px 15px;
            margin: 5px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background-color: #f15c95;
            color: #fff;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #ff78ab;
        }

        button:disabled {
            background-color: #444;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 20px;
            }

            #caption-box {
                font-size: 14px;
                height: 150px; /* Adjusted height for smaller screens */
            }

            button {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Photos Captions</h1>
        <p class="info">Total Captions: <span id="total-count">0</span> | Remaining: <span id="remaining-count">0</span></p>
        <textarea id="caption-box" readonly></textarea>
        <div>
            <button id="copy-button">Copy & Next</button>
            <button id="reset-button">Reset</button>
        </div>
    </div>

    <audio id="reset-sound" src="reset.mp3"></audio> <!-- Reset sound -->
    <audio id="click-sound" src="click.mp3"></audio> <!-- Click sound -->

    <script>
        let captions = [];
        let usedCaptions = JSON.parse(localStorage.getItem('usedCaptions')) || [];
        const captionBox = document.getElementById("caption-box");
        const totalCountElem = document.getElementById("total-count");
        const remainingCountElem = document.getElementById("remaining-count");
        const resetSound = document.getElementById("reset-sound");
        const clickSound = document.getElementById("click-sound");

        // Load captions from captions.txt
        async function loadCaptions() {
            try {
                const response = await fetch('captions.txt');
                const text = await response.text();
                captions = text.split('----').map(c => c.trim()).filter(c => c && !usedCaptions.includes(c));
                shuffleArray(captions);
                updateCounts();
                updateCaptionBox();
            } catch (error) {
                captionBox.value = "Error loading captions!";
                console.error(error);
            }
        }

        // Shuffle array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Display the next caption
        function updateCaptionBox() {
            if (captions.length > 0) {
                captionBox.value = captions[0];
            } else {
                captionBox.value = "No more captions!";
                document.getElementById("copy-button").disabled = true;
            }
        }

        // Update counts
        function updateCounts() {
            const totalCaptions = captions.length + usedCaptions.length;
            totalCountElem.textContent = totalCaptions;
            remainingCountElem.textContent = captions.length;
        }

        // Copy current caption and move to the next
        function copyAndNext() {
            if (captions.length === 0) return;

            // Play click sound
            clickSound.play();

            // Copy caption to clipboard
            navigator.clipboard.writeText(captionBox.value).then(() => {
                console.log("Copied to clipboard");
            }).catch(err => console.error("Error copying text: ", err));

            // Mark caption as used
            const usedCaption = captions.shift();
            usedCaptions.push(usedCaption);
            localStorage.setItem('usedCaptions', JSON.stringify(usedCaptions));

            // Update the box with the next caption
            updateCounts();
            updateCaptionBox();
        }

        // Reset captions
        function resetCaptions() {
            localStorage.removeItem('usedCaptions');
            usedCaptions = [];
            loadCaptions();
            document.getElementById("copy-button").disabled = false;

            // Play reset sound
            resetSound.play();
        }

        // Initial setup
        document.getElementById("copy-button").addEventListener("click", copyAndNext);
        document.getElementById("reset-button").addEventListener("click", resetCaptions);
        loadCaptions();
    </script>

</body>
</html>
